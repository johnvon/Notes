\chapter{Partition a Network}
\lecture{5}{15 Sep. 12:30}{Partition a network Hierarchically}
We want to partition a network in order to study its structure. We do this in the following ways
\begin{enumerate}
	\item Remove bridges and local bridges
	\item Assign importance for each node
\end{enumerate}

\begin{problem}
In what order?
\end{problem}
\begin{answer}
	Assign importance to local bridges (Girvan-Newman method/algorithm).
\end{answer}

\section{Girvan-Newman method}
\begin{intuition}
	A brief summary of this algorithm is
	\begin{enumerate}
		\item Rank all local bridges.
		\item Remove the highest ranked one - yields a partition
		\item Re-calculate ranking
		\item Repeat from 2 until no edges remain
	\end{enumerate}
\end{intuition}

At the end all nodes become isolated

\begin{problem}
How to rank order local bridges? Can we just \_ with all edges?
\end{problem}

\begin{intuition}
	An edge is more important if more \emph{shortest paths} use it. Notice that a \emph{normalization} is needed:
	Between pairs of nodes, there should be lots of variation in the number of the shortest path and we want to balance these out.
\end{intuition}

\subsection{Betweenness}
\begin{definition}[Betweenness]
	Imagine that there is a unit flow of water between each (distinct) pair of nodes. If the flow has $k$ different ways to go to,\footnote{Actually not only depends on where can the flow go, but also where were that node added into BFS in the first place}
	we divide this unit flow into $1/k$. We then equally divide this flow amongst the shortest paths coming out of the starting node
\end{definition}

With the definition of betweenness, the Girvan-Newman method becomes
\begin{enumerate}
	\item Calculate the betweenness of all edges
	\item Find edge(s) with the highest value of betweenness and remove them simultaneously.
	\item If any edges remain, then recalculate betweenness and go to step 2
	\item Stop
\end{enumerate}
Run time analysis: $O(\ln n)$

But how do we calculate betweenness in reality?
\subsection{Calculate betweenness}
\begin{intuition}
	Use BFS in a slight different manner
\end{intuition}
\begin{remark}
	The key is that any sub-path to destination is also a shortest path.
\end{remark}


With BFS exploration ($i$: starting point, $m$ is the destination), we have
\[
	\#\text{ the shortest path from $i$ to $m$} =  \#\text{ the shortest path from $i$ to $j$} +  \#\text{ the shortest path from $i$ to $k$}
\]
while $j, k$ are at same level $n-1$, and $m$ at level $n$, with the fact that there are edges between $j, k$ to $m$. This can be done by adding a \emph{Counter to BFS}.

\subsection{Counter}
From the above equation, we will have
\[
	c_{v}^{n+1} = \sum_{v^n}c^n_{v^n}
\]
where the subscript indicates the node belongs to the counter, and $c_v^{n+1}$ maintains the number of shortest path to $v$, which is just $n+1$.

The unit flow flows from nodes back from the path it is added into the BFS algorithm needs to keep its own 1, and then distribute.

\begin{remark}
	An algorithm for calculating the importance of each local bridge, which turns out to be betweenness. And this is accomplished by BFS with a counter.
\end{remark}