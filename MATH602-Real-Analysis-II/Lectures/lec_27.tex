\lecture{27}{6 Dec. 14:30}{Riesz Representation Theorem}
We will see that the \hyperref[thm:Urysohn-lemma]{Urysohn's lemma} leads to the construction of partition of unity.

\begin{theorem}
	Let \(V_1, \ldots , V_n\) be open subsets of a \hyperref[def:locally-compact]{locally compact} \hyperref[def:Hausdorff]{Hausdorff} space \(X\), and \(K \subseteq \bigcup_{j=1}^{n} V_j\) be \hyperref[def:compact]{compact}. Then there exists functions \(h_i\) for \(i = 1, \ldots  , n\) such that \(h_i \in C_c(X)\), and \(0 \leq h_i \leq 1\) for all \(i\), with \(\mathop{\mathrm{supp}}(h_i) \subseteq V_i\) for all \(i\). Moreover, we have
	\[
		h_1 (x) + h_2(x) + \ldots  + h_n(x) = 1
	\]
	for \(x\in K\).
\end{theorem}
\begin{proof}
	Let \(x\in K\), then \(x\in V_i\) for some \(i = i(x)\). Then there exists open set \(W_x\) such that
	\[
		x\in W_x \subseteq \overline{W} _x \subseteq V_{i(x)}
	\]
	by the previous result.\todo{?} Then, \(\left\{ W_x \right\} _{x\in K}\) is an open cover of \(K\), hence there exists a finite subcover
	\[
		K \subseteq W_{x_1} \cup W_{x_w} \cup \ldots \cup W_{x_N}.
	\]
	Now, for \(1 \leq i \leq n\). Let \(H_i\) be the union of the \(W_{x_j}\) such that \(\overline{W} _{x_j} \subseteq V_i\), so we have \(\overline{H} _i \subseteq V_i\) for all \(i = 1, \ldots  , n\), so \(K \subseteq \bigcup_{i=1}^{n} H_i\). From \hyperref[thm:Urysohn-lemma]{Urysohn's lemma}, there exists \(g_i\) such that
	\[
		\chi _{\overline{H} _i} \leq g_i \leq \chi _{V_i}
	\]
	for \(i = 1, 2, \ldots  , n\). Define the partition of unity \(h_1, \ldots, h_n\) by
	\[
		\begin{split}
			h_1 &= g_1, \\
			h_2 &= (1-g_1)g_2, \\
			&\vdots \\
			h_n &= (1-g_1)(1-g_2) \ldots  (1-g_{n-1}) g_n,
		\end{split}
	\]
	hence \(0 \leq h_i \leq \chi _{V_i}\) for all \(i = 1, \ldots  , n\). Moreover, we have
	\[
		h_1 + h_2 + \ldots  + h_n = 1 - (1-g_1)(1-g_2)\ldots  (1-g_n).
	\]
	We have \(K \subseteq H_1 \cup \ldots  \cup H_n\), and when \(x\in K\), \(g_i(x) = 1\) for some \(i\), i.e., \(h_1 (x) + \ldots  + h_n(x) = 1\).
\end{proof}

\begin{theorem}[Riesz representation theorem]\label{thm:lec27}
	Let \(X\) be \hyperref[def:locally-compact]{locally compact} \hyperref[def:Hausdorff]{Hausdorff} space, and \(\Lambda \) be a positive linear functional on \(C_c(X)\), i.e., \(\Lambda (\cdot)\) is a linear functional on \(C_c(X)\) and \(\Lambda (f) \geq 0\) if \(f(x) \geq 0\) for \(x\in X\). Then there exists a \(\sigma \)-algebra \(\mathcal{M} \) in \(X\) which contains all Borel sets of \(X\), and there exists a unique positive measure \(\mu \) on \(\mathcal{M} \) which represents \(\Lambda \) in the following sense.
	\begin{enumerate}[(a)]
		\item \(\Lambda (f) = \int _X f\,\mathrm{d} \mu \) for \(f\in C_c(X)\).
		\item \(\mu (K) < \infty \) for all \hyperref[def:compact]{compact} \(K\).
		\item \(\mu (E) = \inf \left\{ \mu (V) \colon E \subseteq V, V\text{ open} \right\} \).
		\item The relation \(\mu (E) = \sup \left\{ \mu (K) \colon K \subseteq E, K \text{ \hyperref[def:compact]{compact}}  \right\} \) holds for every open set \(E\), and for every \(E \in \mathcal{M} \) with \(\mu (E) < \infty \).
	\end{enumerate}
\end{theorem}
\begin{proof}\let\qed\relax
	Let's first prove the uniqueness. (c) and (d) imply that the measure \(\mu \) is determined by its values on \hyperref[def:compact]{compact} sets \(K\), so it's sufficient to prove that if \(\mu _1, \mu _2\) are two such measures, \(\mu _1(K) = \mu _2(K)\) for all \hyperref[def:compact]{compact} \(K\). From (c), for any \hyperref[def:compact]{compact} \(K \subseteq V\) and \(\epsilon > 0\), there exists an open \(V\) such that \(K \subseteq V\) with \(\mu (V) < \mu (K) + \epsilon \). From \hyperref[thm:Urysohn-lemma]{Urysohn's lemma}, there exists \(f\in C_c(X)\) such that \(\chi _K \leq f \leq \chi _V\). Note that
	\[
		\mu _1(K)
		= \int_{X} \chi _K \,\mathrm{d}\mu _1
		\leq \int _X f\,\mathrm{d} \mu _1
		= \Lambda (f)
		= \int _X f\,\mathrm{d} \mu _2
		\leq \int _X \chi _V \,\mathrm{d} \mu _2
		= \mu _2(V),
	\]
	so \(\mu _1(K) \leq \mu _2(V) < \mu _2(K) + \epsilon \). Let \(\epsilon \to 0\), \(\mu _1(K) \leq \mu _2(K)\), and similarly, \(\mu _1(K) \geq \mu _2(K)\), so \(\mu _1(K) = \mu _2(K)\).

	To construct \(\mu \) and \(\mathcal{M} \), for every open set \(V\) in \(X\), we define
	\[
		\mu (V) = \sup \left\{ \Lambda (f) \colon f\in C_c(X), 0 \leq f < \chi _V \right\}.
	\]
	Then, define \(\mu (E)\) for all subsets \(E \subseteq X\) such that \(\mu (E) = \inf \left\{ \mu (V)\colon E \subseteq V \right\} \).

	\begin{note}
		Note that these two construction are consistent, i.e., if \(E\) is open, \(\mu (E)\) is given by the first one.
	\end{note}
	\begin{explanation}
		Since from the first supremum definition, open sets \(V_1, V_2\) such that \(V_1 \subseteq V_2\), it implies \(\mu (V_1) \leq \mu (V_2)\).
	\end{explanation}

	To establish additive for the measure \(\mu \), we need to restrict to some \(\sigma \)-algebra of subsets of \(X\). This is analogous of first defining outer measure and then the actual measure. To define \(\mathcal{M} \), we first define \(\widetilde{\mathcal{M}}\) as the class of all subsets \(E \subseteq X\) such that \(\mu (E) < \infty \), and
	\[
		\mu (E) = \sup \left\{ \mu (K) \colon K \subseteq E, K \text{ \hyperref[def:compact]{comapct}}  \right\}.
	\]
	Then \(\mathcal{M} \) is given by the class of all subsets \(E \subseteq X\) such that \(E \cap K \in \widetilde{\mathcal{M} }\) for every \hyperref[def:compact]{compact} \(K\). We now want to show \(\mu \) is a measure on \(\mathcal{M} \).
	\begin{note}
		\(\mu \) is monotone, i.e., \(\mu (A) \leq \mu (B)\) for \(A \subseteq B\). Also, \(\mu (E) = 0\) implies \(E\in \mathcal{M} \).
	\end{note}
	We then use the monotonicity of \(\Lambda (\cdot)\) to prove the remaining properties, i.e., \(f\leq g \implies \Lambda (f) \leq \Lambda (g)\), i.e., \(g-f \geq 0 \implies \Lambda (g - f) = \Lambda (g) - \Lambda (f) \geq 0\).

	For subadditivity, let \(E_n\) be subsets of \(X\) for all \(n \geq 1\), then we want
	\[
		\mu \left( \bigcup_{n=1}^{\infty} E_n \right) \leq \sum_{n=1}^{\infty} \mu (E_n).
	\]
\end{proof}