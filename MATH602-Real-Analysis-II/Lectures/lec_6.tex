\lecture{6}{15 Sep. 14:30}{Riesz Representation Theorem}
Let's first see the proof of \autoref{prop:lec5-2}.
\begin{proof}[Proof of \autoref{prop:lec5-2}]
	We prove them in order.
	\begin{enumerate}[(a)]
		\item Let \(x, y \notin \ker(f)\), then \(f(x), f(y) \neq 0\), meaning that there exists a scalar \(\lambda \neq 0\) such that \(f(x) = \lambda f(y)\), i.e., \(x - \lambda y\in \ker(f)\). Hence, if \([x], [y] \in \quotient{E}{\ker(f)} \), \([x] = \lambda [y]\), implying \(\dim(\quotient{E}{\ker(f)})=1\). Now, if \(f\) is bounded, then \(f\) is continuous, so \(\ker(f) = f^{-1} (\left\{ 0 \right\} )\) is closed.
		\item Consider the induced functionals \(\widetilde{f} , \widetilde{g} \colon \quotient{E}{H} \to \mathbb{\MakeUppercase{r}} \) or \(\mathbb{\MakeUppercase{c}} \) where \(H = \ker(f) = \ker(g)\). This implies
		      \[
			      \dim \left( \quotient{E}{H} \right)  = 1\implies \widetilde{f} = a \widetilde{g} \text{ for some } a \neq 0 \implies f = ag.
		      \]
		\item Assume \(\dim (\quotient{E}{H}) = 1\), so \(\quotient{E}{H} = \left\{ a[x_0]\colon a\in \mathbb{\MakeUppercase{c}} \text{ (or \(\mathbb{R}\))}  \right\} \) for some \(x_0\in E\). Then, for any \(x\in E\), \([x] = a(x)[x_0]\) for some \(a(x)\in \mathbb{\MakeUppercase{c}} \) or \(\mathbb{\MakeUppercase{r}} \). Define \(f(x) \coloneqq a(x)\), we see that \(f\) is linear and \(\ker(f) = H\). Now, if \(E\) is a \hyperref[def:Banach-space]{Banach space} and \(H\) is closed with \(\dim (\quotient{E}{H}) = 1\). Recall that \(\quotient{E}{H}\) is also a \hyperref[def:Banach-space]{Banach space} with \hyperref[def:norm]{norm} \(\left\lVert [x]\right\rVert = \inf _{y\in H} \left\lVert x + y\right\rVert \) for \(x\in E\).\footnote{We see now why we need the closure: otherwise we'll get a non-zero function with \hyperref[def:norm]{norm} \(0\).} Let \(\widetilde{f} \) be a \hyperref[def:linear-functional]{linear functional} on \(\quotient{E}{H} \). Since \(\dim(\quotient{E}{H})\) is finite, \(\widetilde{f} \) is continuous, implying \(\vert \widetilde{f} ([x]) \vert \leq A \left\lVert [x]\right\rVert \) for all \(x\in E\) for some scalar \(A\). Finally, we define \(f(x) = \widetilde{f} ([x])\) for \(x\in E\), then \(\ker(f) = H\) and \(\left\vert f(x) \right\vert \leq A \left\lVert [x]\right\rVert \leq A \left\lVert x\right\rVert\).
	\end{enumerate}
\end{proof}

\section{Representation Theorems}
In concrete \hyperref[def:Banach-space]{Banach spaces}, the \hyperref[def:bounded-linear--functional]{bounded linear functionals} usually have a specific and useful form. Generally speaking, all \hyperref[def:linear-functional]{linear functionals} on function spaces (such as \(L^p\) and \(C(K)\)) act by integration of the function (with respect to some weight or measure). Similarly, all \hyperref[def:linear-functional]{linear functionals} on sequence spaces (such as \(\ell _p\)) act by summation with weights.

We now start by characterizing \hyperref[def:bounded-linear-functional]{bounded linear functionals} on a \hyperref[def:Hilbert-space]{Hilbert space} \(\mathcal{\MakeUppercase{h}} \).
\begin{theorem}[Riesz representation theorem]\label{thm:Riesz-representation}
	Let \(\mathcal{\MakeUppercase{h}} \) be a \hyperref[def:Hilbert-space]{Hilbert space}. Then we have the following.
	\begin{enumerate}[(a)]
		\item For every \(y\in \mathcal{\MakeUppercase{h}} \), then function \(f(x) = \left\langle x, y \right\rangle \) for \(x\in \mathcal{\MakeUppercase{h}} \) is a \hyperref[def:bounded-linear-functional]{bounded linear functional} on \(\mathcal{\MakeUppercase{h}} \).
		\item If \(f\colon \mathcal{\MakeUppercase{h}} \to \mathbb{\MakeUppercase{c}} \) or \(\mathbb{\MakeUppercase{r}} \) is a \hyperref[def:bounded-linear-functional]{bounded linear functional} on \(\mathcal{\MakeUppercase{h}} \), then there exists \(y\in \mathcal{\MakeUppercase{h}} \) such that \(f(x) = \left\langle x,y \right\rangle \) for all \(x\in \mathcal{\MakeUppercase{h}} \). Hence, the \hyperref[def:dual-space]{dual} \(\mathcal{\MakeUppercase{h}} ^{\ast} \) of \(\mathcal{\MakeUppercase{h}} \) is isometric to \(\mathcal{\MakeUppercase{h}} \).
	\end{enumerate}
\end{theorem}
\begin{proof}
	We prove this in order.
	\begin{enumerate}[(a)]
		\item \(f(x)= \left\langle x, y \right\rangle \) is clearly a \hyperref[def:linear-functional]{linear functional}. Boundedness follows form \hyperref[thm:Cauchy-Schwarz-ineq]{Cauchy-Schwarz inequality} such that
		      \[
			      \left\vert f(x) \right\vert = \left\vert \left\langle x, y \right\rangle  \right\vert \leq \left\lVert x\right\rVert \left\lVert y\right\rVert ,
		      \]
		      and we can achieve \(\left\lVert f\right\rVert = \left\lVert y\right\rVert \) by setting \(x = y / \left\lVert y\right\rVert \).
		      \begin{note}
			      Note that there exists \(x_f\) such that \(\left\lVert x_f\right\rVert = 1\) since \(\left\lVert f\right\rVert = \sup _{\left\lVert x\right\rVert = 1} \left\vert f(x) \right\vert = f(x_f)\), i.e., the supremum is achieved, although we're working on an infinite dimensional space. This property does not always hold for \hyperref[def:bounded-linear-functional]{bounded linear functionals} on \hyperref[def:Banach-space]{Banach space} since the unit ball can be not compact. But this holds for \hyperref[def:Hilbert-space]{Hilbert space}.
		      \end{note}
		\item Let \(f\colon \mathcal{\MakeUppercase{h}} \to \mathbb{\MakeUppercase{c}} \) or \(\mathbb{\MakeUppercase{r}} \) be a \hyperref[def:bounded-linear-functional]{bounded linear functional} on \(\mathcal{\MakeUppercase{h}} \). Let \(H = \ker(f)\), which is closed from \autoref{prop:lec5-1}. Let \(H ^\perp\) be the \hyperref[def:orthogonal-complement]{orthogonal complement} of \(H\), i.e., \(\mathcal{\MakeUppercase{h}} = H\oplus H^\perp\). Then \(\dim (\quotient{\mathcal{\MakeUppercase{h}} }{H} )= 1\implies \dim(H^\perp) = 1\). Choose \(y^\prime \in H^\perp\) such that \(g(x) = \left\langle x, y^\prime \right\rangle \), which is in \(\mathcal{\MakeUppercase{h}} ^{\ast} \) from (i). Furthermore, we see that \(\ker(g) = \ker(f)\), so from \autoref{prop:lec5-1}, \(f\) and \(g\) are equal up to a constant \(\lambda \in \mathbb{\MakeUppercase{c}} \) or \(\mathbb{\MakeUppercase{r}} \), i.e., \(f = \lambda g\). It follows that
		      \[
			      f(x) = \lambda g(x) = \lambda \left\langle x, y^\prime \right\rangle = \left\langle x, \lambda y^\prime \right\rangle \eqqcolon \left\langle x, y \right\rangle
		      \]
		      for \(y \coloneqq \lambda y^\prime \), hence we're done.\footnote{We can even show that \(y\) here is unique.}
	\end{enumerate}
\end{proof}

In a concise form, \hyperref[thm:Riesz-representation]{Riesz representation theorem} can be realized as \(\mathcal{\MakeUppercase{h}} ^{\ast} = \mathcal{\MakeUppercase{h}} \). Given a \hyperref[def:Hilbert-space]{Hilbert space} \(\mathcal{\MakeUppercase{h}} \), \hyperref[thm:Riesz-representation]{Riesz representation theorem} identifies the \hyperref[def:dual-space]{dual space} \(\mathcal{\MakeUppercase{h}} ^{\ast} \), which can be used to show \hyperref[thm:Radon-Nikodym]{Radon-Nikodym theorem}.

\begin{theorem}[Radon-Nikodym theorem]\label{thm:Radon-Nikodym}
	Let \(\mu , \nu \) be two finite measures such that \(v \ll \mu \), i.e., \(\nu \) is absolutely continuous w.r.t, \(\mu \).\footnote{This means \(\mu (A) = 0 \implies \nu (A) = 0\).} Then there exists \(g \geq 0\) such that \(g\) is \(\mu \)-integrable and
	\[
		\nu (A) = \int _A g \,\mathrm{d} \mu
	\]
	for \(A\) measurable.
\end{theorem}
\begin{proof}
	Consider the \hyperref[def:linear-functional]{linear functional} \(F\colon L^2(\mu ) \to \mathbb{\MakeUppercase{r}} \) or \(\mathbb{\MakeUppercase{c}} \) such that
	\[
		F(f) = \int _{\Omega }f\,\mathrm{d} \mu .
	\]
	Then we have \(\left\lVert F(f)\right\rVert \leq \left\lVert f\right\rVert _2 \sqrt{ \mu (\Omega )}\), i.e., \(F\) is also a \hyperref[def:bounded-linear-functional]{bounded linear functional} on \(L^2(\mu + \nu )\), hence by \hyperref[thm:Riesz-representation]{Riesz representation theorem}, there exists \(h\in L^2(\mu +\nu )\) such that
	\[
		F(f) = \int_\Omega  fh\,\mathrm{d} (\mu +\nu )
	\]
	for \(f\in L^2(\mu + \nu )\), i.e.,
	\begin{equation}\label{eq:lec6-1}
		\int _\Omega f\,\mathrm{d} \mu = \int _\Omega fh\,\mathrm{d} \mu + \int _\Omega fh \,\mathrm{d} \nu
	\end{equation}
	if \(f\in L^2(\mu +\nu )\). This further implies
	\begin{equation}\label{eq:lec6-2}
		\int _\Omega fh\,\mathrm{d} \nu = \int _\Omega f[1 - h] \,\mathrm{d} \mu
	\end{equation}
	for \(f\in L^2(\mu + \nu )\).
	\begin{claim}
		Such \(h\) satisfies \(0 < h \leq 1\) \(\mu\)-a.e., moreover, \((\mu+\nu )\)-a.e.
	\end{claim}
	\begin{explanation}
		We first note that \(\mu (A) = 0 \iff \mu (A) + \nu (A) = 0\). Let \(A = \left\{ h \leq 0 \right\} \), \(f = \mathbbm{1}_{A}\) be the characteristic function on \(A\). Then \autoref{eq:lec6-1} implies
		\[
			\int _A h ( \,\mathrm{d} \mu  + \,\mathrm{d} \nu ) \leq 0 \implies \mu (A) = 0 \implies h > 0 \text{ \(\mu\) a.e.}
		\]
		But since \(g\) is a positive function, so we also need \(h \leq 1\). Again, set \(B = \left\{ h > 1 \right\} \), \(f = \mathbbm{1}_{B}\). Then \autoref{eq:lec6-1} implies
		\[
			\mu (B) = \int _B h \left( \,\mathrm{d} \mu + \,\mathrm{d} \nu  \right) > \mu (B)
		\]
		unless \(\mu (B) = 0\).
	\end{explanation}


	Now, by using \href{https://en.wikipedia.org/wiki/Monotone_convergence_theorem}{monotone convergence theorem}, we conclude\footnote{Consider \(f_n(t) \coloneqq \min (f(t), n)\) and let \(n\to \infty \).} that \autoref{eq:lec6-2} holds for all \(f \geq 0\), \(f\in L^2(\mu + \nu )\).\footnote{Both sides could be \(\infty\).} Finally, let \(A\subseteq \Omega \) measurable and \(hf = \chi _A\), from \autoref{eq:lec6-2},
	\[
		\nu (A) = \int _A \frac{1 - h}{h}\,\mathrm{d} \mu.
	\]
	By letting \(g \coloneqq 1 - h / h \implies g = \mathrm{d}\nu /\mathrm{d}\mu\), we're done.
\end{proof}

\begin{notation}[Radon-Nikodym derivative]
	\(g\) in \hyperref[thm:Radon-Nikodym]{Radon-Nikodym theorem} is referred to as the \emph{Radon-Nikodym derivative} where \(g \coloneqq \mathrm{d}\nu /\mathrm{d}\mu \).
\end{notation}

\begin{note}[Uniqueness]
	The uniqueness of Radon-Nikodym derivatives can be shown via
	\[
		\int _A g\,\mathrm{d} \mu = 0
	\]
	for all \(\mu \)-measurable \(A\), i.e., \(g=0\) \(\mu\)-a.e.
\end{note}

Another useful application of \hyperref[thm:Riesz-representation]{Riesz representation theorem} is to characterize \(L^p\) and \(\ell _p\) spaces and their \hyperref[def:dual-space]{dual} \(L^{\ast} _p\) and \(\ell ^{\ast} _p\). We first see the following.
\begin{remark}
	Consider spaces \(L^p(\Omega , \mu )\) for \(1 \leq p \leq \infty \), then we have
	\[
		L^{q}(\Omega , \Sigma , \mu )\subseteq (L^p(\Omega , \Sigma , \mu ))^{\ast}
	\]
	where \(1 / p + 1 / q = 1\).
\end{remark}
\begin{explanation}
	The easy part is that \(g\in L^q\) induces a bounded linear functional on \(L^p\) by setting
	\[
		F(f) = \int _\Omega fg\,\mathrm{d} \mu.
	\]
	By \hyperref[lma:Holder-ineq]{Hölder's inequality}, \(\left\vert F(f) \right\vert \leq \left\lVert f\right\rVert _p \left\lVert g\right\rVert _q\), hence \(\left\lVert F\right\rVert \leq \left\lVert g\right\rVert _q\). To show the equality and \(\sup _{\left\lVert f\right\rVert _p}\left\vert F(f) \right\vert \) is attained for \(1 < p < \infty \), we choose \(f = g^{q - 1}\sgn(g)\) since
	\[
		F(f) = \int _\Omega \left\vert g \right\vert ^q\,\mathrm{d} \mu = \left\lVert g\right\rVert ^q_q,
	\]
	and from \(1 / p + 1 / q = 1 \implies q-1 = q / p\), we have
	\[
		\left\lVert f\right\rVert ^p_p = \int \left\vert f \right\vert ^p \,\mathrm{d} \mu= \int _\Omega \left\vert g \right\vert ^q\,\mathrm{d} \mu = \left\lVert g\right\rVert _q^q \implies \left\lVert f\right\rVert _p = \left\lVert g\right\rVert _q^{q / p} = \left\lVert g\right\rVert _q^{q - 1}.
	\]
	This implies
	\[
		F(f) = \int _\Omega \left\vert g \right\vert ^q\,\mathrm{d} \mu \implies \left\lVert g\right\rVert ^q_q = \left\lVert g\right\rVert _q \left\lVert f\right\rVert _p.
	\]
	\begin{note}
		We see that \(\sup _{\left\lVert f\right\rVert _p = 1} \left\vert F(f) \right\vert \) is attained by taking \(f = \sgn(g)\).
	\end{note}
\end{explanation}

In particular, we have the following.
\begin{theorem}[\({L^{p}}^{\ast} = L^q\)]\label{thm:lec6}
	Consider the space \(L^p = L^p(\Omega , \Sigma , \mu )\) with finite measure of \(\sigma \)-finite measure \(\mu \). Then for \(1 \leq p < \infty \) and the conjugate exponent \(q \) of \(q\).
	\begin{enumerate}[(a)]
		\item For every weight function \(g\in L^q\), integration with weight
		      \[
			      \int _\Omega fg\,\mathrm{d} \mu
		      \]
		      for \(f\in L^p\) is a \hyperref[def:bounded-linear-functional]{bounded linear functional} on \(L^p\), and its norm is \(\left\lVert G\right\rVert = \left\lVert g\right\rVert _q\).
		\item Conversely, every \hyperref[def:bounded-linear-functional]{bounded linear functional} \(G\in {L^p}^{\ast}\) can be represented as integration with weight for some unique weight function \(g\in L^q\). Moreover, \(\left\lVert G\right\rVert = \left\lVert g\right\rVert _q\).
	\end{enumerate}
\end{theorem}