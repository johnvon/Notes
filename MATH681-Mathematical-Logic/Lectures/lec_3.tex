\lecture{3}{12 Jan. 14:30}{}
\begin{prev}
	If \(\mathcal{M} \models \varphi (\overline{a} )\), we say that \emph{\(\mathcal{M} \) satisfies \(\varphi (\overline{a} )\)}, or \emph{\(\varphi (\overline{a} )\) is true in \(\mathcal{M} \)}. And if \(\varphi \) is a \hyperref[def:sentence]{sentence}, we can write \(\mathcal{M} \models \varphi \) or \(\mathcal{M} \not\models \varphi \iff \mathcal{M} \models \lnot \varphi \).
\end{prev}

Consider the \hyperref[eg:language-graph]{language of graphs} \(\mathcal{L} _{\text{graph} } = \left\{ E\right\} \), and consider the following examples.

\begin{eg}[Material implication]
	An undirected graph can be written as
	\[
		\forall x\forall y\ (xEy \to yEx),
	\]
	where we take \(\to \) as an abbreviation such that \(\varphi \to \psi \) means \(\psi \lor \lnot \varphi \), called \emph{material implication}. We see that any model of this \hyperref[def:sentence]{sentence} is undirected.
\end{eg}

\begin{eg}
	A vertex has at least three neighbors can be written as
	\[
		\varphi (x) \coloneqq \exists u\exists v\exists w\ (xEu \land xEv \land xEw \land u \neq v\land v \neq w\land u \neq w)
	\]
	in non-reflexive graphs.
\end{eg}

\begin{eg}
	In terms of exactly three neighbors:
	\[
		\psi (x)\coloneqq \exists u \exists v \exists w \forall y\ \big(xEu \land xEv \land xEw \land u \neq v\land v \neq w\land u \neq w \land (y = u \lor y = v \lor y = w \lor \lnot y E x)\big)
	\]
\end{eg}

\begin{problem*}
	Can we say that \(x\) has an even number of neighbors?
\end{problem*}
\begin{answer}
	We can't. Some things are not expressible in first-order (FO) logic.
\end{answer}

\begin{eg}
	\(x\) has a path of length \(4\) to \(y\):
	\[
		\Theta (x, y) \coloneqq \exists u \exists v \exists w\ (xEu \land uEv \land vEw \land wEy)
	\]
	We can also express that there is a path of length at most \(4\).
\end{eg}

\begin{problem*}
	Can we say that there is a path from \(x\) to \(y\)?
\end{problem*}
\begin{answer}
	We still can't! Not in FO logic (using \hyperref[thm:compactness]{compactness theorem}).
\end{answer}

We started with \(\land , \lor , \lnot, \forall , \exists \); but we could have started with on of \(\land\) or \(\lor\) or \(\to \), and \(\lnot\), and one of \(\forall \) or \(\exists \). Then we would treat the other two as abbreviations.

\begin{eg}
	\(\varphi \land \psi \) could be an abbreviation for \(\lnot (\lnot \varphi \lor \lnot \psi )\).
\end{eg}

\begin{eg}
	\(\exists x\ \varphi \) could be an abbreviation for \(\lnot (\forall x\ \lnot \varphi )\).
\end{eg}

\begin{eg}
	\(\forall x\ \varphi \) could be an abbreviation for \(\lnot (\exists x\ \lnot \varphi )\).
\end{eg}

\begin{remark}[\href{https://en.wikipedia.org/wiki/Sheffer_stroke}{Sheffer stroke}]
	In fact, we can get \(\land , \lor , \lnot\) from one logical connective, \emph{sheffer stroke} \(\uparrow \) is defined as
	\[
		\varphi \uparrow \psi \coloneqq \lnot(\varphi \land \psi ),
	\]
	and we can use \(\uparrow \) to define \(\lnot, \lor , \land \).
\end{remark}

\begin{notation}
	Let \(\Phi \) be a (possibly infinite) set of \hyperref[def:sentence]{sentences}, we write \(\mathcal{M} \models \Phi \) if \(\mathcal{M} \models \varphi \) for all \(\varphi \in \Phi \).
\end{notation}

\begin{definition}[Logical consequence]\label{def:logical-consequence}
	Let \(\Phi \) be a set of \hyperref[def:sentence]{sentences}, and \(\varphi \) a \hyperref[def:sentence]{sentence}. \(\varphi \) is a \emph{logical consequence} of \(\Phi \), written \(\Phi \models \varphi \), if \(\mathcal{M} \models \varphi \) whenever \(\mathcal{M} \models \Phi \) in all models \(\mathcal{M} \). If \(\Phi = \varnothing \) is the empty set, write \(\models \varphi \), which means that \(\varphi \) is true in all \hyperref[def:structure]{\(\mathcal{L} \)-structures}.\footnote{Recall that we always have a \hyperref[def:language]{language} \(\mathcal{L} \) implicitly.}
\end{definition}

\begin{definition}[Equivalent]\label{def:equivalent}
	Say that \(\varphi (\overline{x} )\) and \(\psi (\overline{x} )\) are \emph{equivalent} if
	\[
		\models \forall \overline{x} \ \big(\varphi (\overline{x} ) \leftrightarrow \psi (\overline{x} )\big).
	\]
\end{definition}

\begin{notation}
	In \autoref{def:equivalent}, \(\leftrightarrow\) is the logical symbol (essentially \(\to \) in both directions), showing up in formulas, and is different from \(\iff \).
\end{notation}

\begin{problem*}
	Two \hyperref[def:sentence]{sentences} \(\varphi \) and \(\psi \) are \hyperref[def:equivalent]{equivalent} if and only if \(\varphi \models \psi \) and \(\psi \models \varphi \).\todo{DIY}
\end{problem*}

\begin{prev}
	\(\mathcal{A} \) is a \hyperref[def:substructure]{substructure} of \(\mathcal{B} \), or \(\mathcal{A} \subseteq \mathcal{B} \), means that \(A \subseteq B\) and \(\identity\colon A \hookrightarrow B \) is an \hyperref[def:embedding]{\(\mathcal{L} \)-embedding}.
\end{prev}

\begin{proposition}
	Suppose that \(\mathcal{A} \) is a \hyperref[def:substructure]{substructure} of \(\mathcal{B} \), and \(\varphi (\overline{x} )\) is a quantifier-free formula. Let \(\overline{a} \in \mathcal{A} \).\footnote{Formally, we will need to set \(\mathcal{A} \) to be the Cartesian product with a fixed length, but we usually abbreviate it and drop the power.} Then \(\mathcal{A} \models \varphi (\overline{a} )\) if and only if \(\mathcal{B} \models \varphi (\overline{a} )\).
\end{proposition}
\begin{proof}
	We start with \hyperref[def:term]{terms}. We'll prove that if \(t\) is a \hyperref[def:term]{term} and \(\overline{b} \in \mathcal{A} \), then \(t^{\mathcal{A} }(\overline{b} )=t^{\mathcal{B} }(\overline{B} ) \). The proof is induction on \hyperref[def:term]{terms}.
	\begin{enumerate}[(1)]
		\item If \(t\) is \(c\), then \(t^{\mathcal{A} }(\overline{b} ) = c^{\mathcal{A} } = c^{\mathcal{B} } = t^{\mathcal{B} } (\overline{b} )\).
		\item If \(t\) is a variable \(x_i\), then \(t^{\mathcal{A} }(\overline{b} ) = b_i = t^{\mathcal{B}} (\overline{b} )\).
		\item If \(t\) is \(f(s_1, \ldots , s_n)\), then \(t^{\mathcal{A} }(\overline{b} )=f^{\mathcal{A} }\big(s_1^{\mathcal{A} }(\overline{b} ), \ldots , s_n^{\mathcal{A} }(\overline{b} ) \big) \). By the induction hypothesis, \(s_i^{\mathcal{A} }(\overline{b} )=s_i^{\mathcal{B} }(\overline{b} )\in \mathcal{A} \), and hence
		      \[
			      t^{\mathcal{B} }(\overline{b} )
			      = f^{\mathcal{B} }\big( s_1^{\mathcal{B} }(\overline{b} ), \ldots , s_n^{\mathcal{B} }(\overline{b} ) \big)
			      = f^{\mathcal{B} }\big( s_1^{\mathcal{A} }(\overline{b} ), \ldots , s_n^{\mathcal{B} }(\overline{b} ) \big),
		      \]
		      i.e., \(f^{\mathcal{B} }\upharpoonright _{\mathcal{A} } = f^{\mathcal{A} } \), so \(t^{\mathcal{A} }(\overline{b} ) = t^{\mathcal{B} }(\overline{b} ) \).
	\end{enumerate}
	Now we turn to \hyperref[def:formula]{formulas}, and prove that for \(\varphi \) quantifier-free that \(\mathcal{A} \models \varphi (\overline{a} ) \iff \mathcal{B} \models \varphi (\overline{a} )\) for \(\overline{a} \in \mathcal{A} \). By induction on \hyperref[def:formula]{formulas},
	\begin{enumerate}[(1)]
		\item If \(\varphi \) is \(s=t\), then \(s^{\mathcal{A} }(\overline{a} )= s^{\mathcal{B} }(\overline{a} ) \) and \(t^{\mathcal{A} }(\overline{a} ) = t^{\mathcal{B} }(\overline{a} ) \), so
		      \[
			      \mathcal{A} \models \varphi (\overline{a} )
			      \iff s^{\mathcal{A} }(\overline{a} ) = t^{\mathcal{A} }(\overline{a} )
			      \iff s^{\mathcal{B} }(\overline{a} ) = t^{\mathcal{B} }(\overline{a} )
			      \iff \mathcal{B} \models \varphi (\overline{a} ).
		      \]
		\item If \(\varphi \) is \(R(s_1, \ldots , s_n)\), then
		      \[
			      A\models \varphi (\overline{a} )
			      \iff \big(s_1^{\mathcal{A} }(\overline{a} ), \ldots , s_n^{\mathcal{A} }(\overline{a} ) \big) \in R^{\mathcal{A} }
			      \iff \big(s_1^{\mathcal{B} }(\overline{a} ), \ldots , s_n^{\mathcal{B} }(\overline{a} )  \big)\in R^{\mathcal{B} }
			      \iff \mathcal{B} \models \varphi (\overline{a} ).
		      \]
		\item If \(\varphi \) is \(\lnot \psi \),
		      \[
			      \mathcal{A} \models \varphi (\overline{a} )
			      \iff \mathcal{A} \not\models \psi (\overline{a} )
			      \iff \mathcal{B} \not\models \psi (\overline{a} )
			      \iff \mathcal{B} \models \varphi (\overline{a} ),
		      \]
		      where we use the induction hypothesis in the second \(\iff \).
		\item If \(\varphi \) is \(\psi _1 \lor \psi _2\),\footnote{Recall that we only need to show one of \(\lor \) or \(\land \), and here we pick \(\lor \) and treat \(\land \) as an abbreviation.}
		      \[
			      \mathcal{A} \models \varphi (\overline{a} )
			      \iff \mathcal{A} \models \psi _1(\overline{a} ) \text{ or } \mathcal{A} \models \psi _2(\overline{a} )
			      \iff \mathcal{B} \models \psi _1(\overline{a} ) \text{ or } \mathcal{B} \models \psi _2(\overline{a} )
			      \iff \mathcal{B} \models \varphi (\overline{a} ),
		      \]
		      where we use the induction hypothesis in the second \(\iff \).
	\end{enumerate}
\end{proof}

\begin{prev}[Characteristic]
	Given a field \(K\), the \emph{characteristic} \(p\) of \(K\) is the number of \(1\) you need to add \(1\) in order to get \(0\), i.e.,
	\[
		\underbrace{1+1+\ldots +1}_{p} = 0.
	\]
\end{prev}

\begin{eg}
	Let \(L\) be a subfield of \(K\), for each \(p > 0\), \(\varphi _p \coloneqq \underbrace{1+1+\ldots +1}_{p} = 0\), which says the characteristic \(p\). \(\varphi _p\) is quantifier-free, so
	\[
		L \models \varphi _p \iff K \models \varphi _p.
	\]
\end{eg}

\begin{eg}
	Consider \(\mathbb{Z} =(\mathbb{Z} , 0, 1, +, -, \cdot)\), and let \(\varphi (x)\coloneqq \lnot \exists y\ y + y = x\). We see that \(\mathbb{Z} \models \varphi (1)\) but \(\mathbb{Q} \models \lnot \varphi (1)\).
\end{eg}

\begin{proposition}\label{prop:lec3}
	Suppose that \(\mathcal{A} \) is a \hyperref[def:substructure]{substructure} of \(\mathcal{B} \), and \(\varphi (\overline{x}, y_1, \ldots , y_n )\) is a quantifier-free \hyperref[def:formula]{formula}. Let \(\overline{a} \in \mathcal{A} \). Then
	\begin{enumerate}[(a)]
		\item if \(\mathcal{A} \models \exists y_1 \ldots \exists y_n \varphi (\overline{a} , y_1, \ldots , y_n)\), then \(\mathcal{B} \models \exists y_1\ldots \exists y_n\ \varphi (\overline{a} , y_1, \ldots , y_n)\);
		\item if \(\mathcal{B} \models \forall y_1 \ldots \forall y_n\ \varphi (\overline{a} , y_1, \ldots , y_n)\), then \(\mathcal{A} \models \forall y_1 \ldots \forall y_n\ \varphi (\overline{a} , y_1, \ldots , y_n)\).
	\end{enumerate}
\end{proposition}
\begin{proof}
	It's easy to see that (b) is implied by (a), so we only prove (a). Suppose that \(\mathcal{A} \models \exists y_1 \ldots \exists y_n\ \varphi (\overline{a} , y_1, \ldots , y_n)\), so there are \(b_1, \ldots , b_n \in \mathcal{A} \) such that \(\mathcal{A} \models \varphi (\overline{a} , b_1, \ldots , b_n)\). Since \(\varphi \) is quantifier-free, so \(\mathcal{B} \models \varphi (\overline{a} , b_1, \ldots , b_n)\). Thus,
	\[
		\mathcal{B} \models \exists y_1 \ldots \exists y_n \ \varphi (\overline{a} , y_1, \ldots , y_n).
	\]
\end{proof}

\begin{remark}
	In \autoref{prop:lec3}, \hyperref[def:formula]{formulas} as in (a) are called \emph{existential (\(\exists _1\) or \(\exists \)) formulas}; and \hyperref[def:formula]{formulas} as in (b) are called \emph{universal (\(\forall _1\) or \(\forall \)) formulas}.
\end{remark}

\begin{eg}
	Recall \(\mathcal{L} _1 = \left\{ e, \cdot \right\} \), \(\mathcal{L} _2=\left\{ e, \cdot, ^{-1} \right\} \).
	\begin{itemize}
		\item Associativity: \(\forall x \forall y \forall z\ (xy)z = x(yz)\).
		\item Identity: \(\forall x\ ex = xe\).
	\end{itemize}
	These are \(\forall \)-formulas in either \hyperref[def:language]{language}.
	\begin{itemize}
		\item Inverses in \(\mathcal{L} _1\): \(\forall x \exists y\ xy = yx = e\), which is \textbf{not} an \(\forall \)-formula.
		\item Inverses in \(\mathcal{L} _2\): \(\forall x\ x x ^{-1} = x ^{-1} x = e\), which is an \(\forall \)-formula.
	\end{itemize}
	Hence, group axioms in \(\mathcal{L} _1\) are not universal, but in \(\mathcal{L} _2\) they are.
\end{eg}

\begin{problem*}
	Show that \(\forall x \exists y\ xy = yx = e\) in the above example is not \hyperref[def:equivalent]{equivalent} to an \(\forall \)-formula.
\end{problem*}