\lecture{13}{4 Feb.\ 11:00}{Integration of Complex Functions}
\section{Integration of Complex Functions}
As usual, we start with a definition.
\begin{definition}[Integrable]\label{def:integrable}
	Let \((X, \mathcal{A} , \mu )\) be a \hyperref[def:measure-space]{measure space} and let \(f\colon X\to \overline{\mathbb{R} }\) and \(g\colon X\to \mathbb{C} \)
	be \hyperref[def:measurable-function]{measurable}.\footnote{Recall that for a complex-valued function like \(g\), this means that both \(\Re g\) and \(\Im g\) are \hyperref[def:measurable-function]{measurable}.}

	Then \(f, g\) are called \emph{integrable} if \(\int \left\vert f \right\vert < \infty \) and \(\int \left\vert g \right\vert < \infty \), and we define
	\[
		\int f = \int \hyperref[def:positive-part]{f^+} - \int \hyperref[def:negative-part]{f^-},\quad \int g = \int \Re g + i \int \Im g.
	\]
	Furthermore, for \(f\colon X\to \overline{\mathbb{R} }\), we define
	\[
		\int f = \begin{dcases}
			\infty ,  & \text{ if }  \int \hyperref[def:positive-part]{f^+} = \infty , \int \hyperref[def:negative-part]{f^-} < \infty ; \\
			-\infty , & \text{ if }  \int \hyperref[def:positive-part]{f^+} < \infty , \int \hyperref[def:negative-part]{f^-} = \infty .
		\end{dcases}
	\]
\end{definition}

We now see a lemma.
\begin{lemma}\label{lma:lec-13-1}
	Let \(f, g\colon X\to \overline{\mathbb{R} }\) or \(\mathbb{C} \) \hyperref[def:integrable]{integrable}. Assume that \(f(x) + g(x)\) is well-defined
	for all \(x\in X\).\footnote{That is, we never see \(\infty + (-\infty )\) or \((-\infty ) + \infty \).} Then we have
	\begin{enumerate}[(a)]
		\item \(f+g\), \(cf\) for all \(c\in \mathbb{C} \) are \hyperref[def:integrable]{integrable}.
		\item\label{lma:linearity-of-integral} \(\int f + g = \int f + \int g\). This is not trivial since \((f+g)^+ \neq f^+ + g^+\).
		\item \(\left\vert \int f \right\vert \leq \int \left\vert f \right\vert \).
	\end{enumerate}
\end{lemma}
\begin{proof}
	Check~\cite[page 53]{folland1999real}.
\end{proof}

\begin{lemma}\label{lma:lec-13-2}
	Let \((X, \mathcal{A} , \mu )\) be a \hyperref[def:measure-space]{measure space} and let \(f\) be an \hyperref[def:integrable]{integrable} function on \(X\).
	Then
	\begin{enumerate}[(a)]
		\item \(f\) is finite \hyperref[def:mu-almost-everywhere]{a.e.}, i.e., \(\{x\in X \mid \left\vert f(x) \right\vert = \infty \}\) is a \hyperref[def:mu-null-set]{null set}.
		\item The set \(\{x\in X \mid f(x)\neq 0\}\) is \hyperref[def:finite-measure]{\(\sigma \)-finite}.
	\end{enumerate}
\end{lemma}
\begin{proof}
	This can be proved with \hyperref[lma:Markov-inequality]{Markov's inequality}.
\end{proof}

\begin{proposition}\label{prop:lec-13}
	Let \((X, \mathcal{A} , \mu )\) be a \hyperref[def:measure-space]{measure space}, then
	\begin{enumerate}[(a)]
		\item If \(h\) is \hyperref[def:integrable]{integrable} on \(X\), then
		      \[
			      \underset{E\in \mathcal{A} }{\forall }\ \int_E h = 0 \iff \int \left\vert h \right\vert = 0 \iff h = 0\ \hyperref[def:mu-almost-everywhere]{a.e.}
		      \]
		\item If \(f, g\) are \hyperref[def:integrable]{integrable} on \(X\), then
		      \[
			      \underset{E\in \mathcal{A} }{\forall }\ \int _E f = \int _E g \iff f = g\ \hyperref[def:mu-almost-everywhere]{a.e.}
		      \]
	\end{enumerate}
\end{proposition}
\begin{proof}
	We prove this one by one.
	\begin{enumerate}[(a)]
		\item We see that the second equivalence is done in \autoref{prop:lec12-1}, hence we prove the first equivalence only.
		      Since we have
		      \[
			      \int \left\vert h \right\vert = 0 \implies \left\vert \int _E h \right\vert \leq \int _E \left\vert h \right\vert \leq \int \left\vert h \right\vert = 0,
		      \]
		      which shows one implication. Now assume that \(\int _E h = 0\) for all \(E\in \mathcal{A} \), then we can write \(h\) as
		      \[
			      h = u + iv = (u^+ - u^-) + i (v^+ - v^-).
		      \]
		      Let \(B\coloneqq \{x\in X \mid u^+(x)>0\}\), then by assumption, we have
		      \[
			      0 = \int _B h = \Re \int _B h = \int _B u = \int _B u^+ = \int _B u^+ + \int _{B^{c}} u^+ = \int u^+,
		      \]
		      hence \(u^+ = 0\) \hyperref[def:mu-almost-everywhere]{almost everywhere}. Similarly, we have \(u^-, v^+, v^-\) are all zero \hyperref[def:mu-almost-everywhere]{almost everywhere}. This gives us that \(h\) is zero  \hyperref[def:mu-almost-everywhere]{almost everywhere} as desired.
		\item \todo{DIY}
	\end{enumerate}
\end{proof}

\begin{theorem}[Dominated convergence theorem]\label{thm:DCT}
	Let \((X, \mathcal{A} , \mu )\) be a \hyperref[def:measure-space]{measure space}, and
	\begin{itemize}
		\item Let \(f_{n}\) be \hyperref[def:integrable]{integrable} on \(X\).
		\item \(\lim_{n \to \infty} f_{n}(x) = f(x)\) \hyperref[def:mu-almost-everywhere]{almost everywhere}.
		\item There is a \(g\colon X\to [0, \infty ]\) such that \(g\) is \hyperref[def:integrable]{integrable} and
		      \[
			      \underset{n\in\mathbb{N} }{\forall }\ \left\vert f_{n}(x) \right\vert \leq g(x)\ \hyperref[def:mu-almost-everywhere]{a.e.}
		      \]
	\end{itemize}
	Then we have
	\[
		\lim_{n \to \infty} \int f_{n} = \int f = \int \lim_{n \to \infty} f_{n}.
	\]
\end{theorem}
\begin{proof}
	Let \(F\) be the countable union of \hyperref[def:mu-null-set]{null set} on which the three conditions may fail. Then we see that after modifying the definition of \(f_{n}, f\) and \(g\) on \(F\), we may assume that all three conditions hold everywhere since modifying on a \hyperref[def:mu-null-set]{null set} does not change the integral.

	We now consider the \(\overline{\mathbb{R} }\)-valued case only.\todo{Check \(\mathbb{C} \)-valued case} Note that the second and the third conditions imply that \(f\) is \hyperref[def:integrable]{integrable} since \(\left\vert f \right\vert \leq g(x)\). We then see that \(g + f_{n}\geq 0\) and \(g - f_{n}\geq 0\) because \(-g\leq f_{n}\leq g\). From \hyperref[thm:Fatou-lemma]{Fatou's lemma}, we have
	\[
		\int g + f \leq \liminf_{n \to \infty} \int g + f_{n},\quad \int g - f\leq \liminf_{n \to \infty} \int g - f_{n}.
	\]
	From the \hyperref[lma:linearity-of-integral]{linearity of integral}, we have
	\[
		\int g + \int f\leq \int g + \liminf_{n \to \infty} \int f_{n},\quad \int g - \int f \leq \int g - \liminf_{n \to \infty} \int f_{n}.
	\]
	Now, since \(\int g<\infty \), we can cancel it, which gives
	\[
		\int f \leq \liminf_{n \to \infty} \int f_{n},\quad -\int f \leq \liminf_{n \to \infty} \int -f_{n} = - \limsup_{n \to \infty} \int f_{n},
	\]
	which implies
	\[
		\int f \leq \liminf_{n \to \infty} f_{n}\leq \limsup_{n \to \infty} \int f_{n}\leq \int f.
	\]
	This shows that the limit exists, and the desired result indeed holds.
\end{proof}

\begin{corollary}[Tonelli's theorem for series and integrals]\label{col:Tonelli-theorem-for-series-and-integrals}
	Suppose \(f_{n}\) are \hyperref[def:integrable]{integrable} functions such that
	\[
		\sum_{n=1}^{\infty} \int \left\vert f_{n} \right\vert < \infty,
	\]
	then we have
	\[
		\int \sum_{n=1}^{\infty} f_{n} = \sum_{n=1}^{\infty} \int f_{n}.
	\]
\end{corollary}
\begin{proof}
	Take \(G(x)\) to be
	\[
		G(x) \coloneqq \sum_{n=1}^{\infty} \left\vert f_{n}(x) \right\vert,
	\]
	then we see \(G(x) \geq \left\vert F_{N}(x) \right\vert\) where \(F_{N}(x) \coloneqq \sum_{n=1}^{N} f_{n}(x)\).
	By \autoref{col:Tonelli-theorem-for-nonnegative-series-and-integrals}, we have
	\[
		\int G(x) = \sum_{n=1}^{\infty} \left\vert f_{n}(x) \right\vert < \infty .
	\]
	Lastly, from \autoref{thm:DCT}, the result follows.
\end{proof}
\begin{remark}
	Compare to \autoref{col:Tonelli-theorem-for-nonnegative-series-and-integrals}, we see that we further generalize the result!
\end{remark}