\lecture{11}{31 Jan. 11:00}{Integration of nonnegative functions}
\begin{prev}
	For a \hyperref[def:simple-function]{simple function} \(\phi\), \(c_{i}\) can actually be in \(\mathbb{\MakeUppercase{c}} \).
\end{prev}

\begin{theorem}
	Given \((X, \mathcal{\MakeUppercase{a}} )\) be a measurable space, and let \(f\colon X\to [0, \infty ]\), the following is equivalent.
	\begin{enumerate}
		\item \(f\) is \hyperref[def:A-measurable-function]{\(\mathcal{\MakeUppercase{a}} \)-measurable} function.
		\item There exists simple functions \(0\leq \phi_1(x)\leq \phi_2(x)\leq \ldots \leq f(x) \) such that
		      \[
			      \underset{x\in X}{\forall }\ \lim\limits_{n \to \infty} \phi _{n}(x) = f(x)
		      \]
		      i.e., \(f\) is a \underline{pointwise upward} limit of simple functions.
	\end{enumerate}
\end{theorem}
\begin{proof}
	It's clear that \((2.)\implies (1.)\) from the fact that \(f(x) = \sup_n \phi _{n}(x)\). Now, we want to show that \((1.)\implies (2.)\).
	Assume \(f\) is \hyperref[def:A-measurable-function]{\(\mathcal{\MakeUppercase{a}} \)-measurable}, and fix \(n\in\mathbb{\MakeUppercase{n}} \).
	Let \(F_{n} =f^{-1} ([2^n, \infty ])\in \mathcal{\MakeUppercase{a}}\). Then for \(0\leq k\leq 2^{2n}-1\), \(E_{n, k} = f^{-1} \left(\left[\frac{k}{2^n}, \frac{k+1}{2^n}\right]\right)\in \mathcal{\MakeUppercase{a}} \).

	Then, define \(\phi _{n}\) be
	\[
		\phi _{n} = \sum\limits_{k=0}^{2^{2n} - 1}\frac{k}{2^n}\mathbbm{1}_{E_{n, k}}  + 2^n \mathbbm{1}_{F_n},
	\]
	we have
	\begin{itemize}
		\item \(0\leq \phi _1(x)\leq \phi _2(x)\leq \ldots \leq f(x) \) for every \(x\in X\)
		\item \(\forall x\in X\setminus F_{n}\), we have \(0\leq f(x) - \phi _{n}(x)\leq \frac{1}{2^n}\)
	\end{itemize}

	Furthermore, we see that
	\[
		F_1\supset F_2\supset \ldots ,\quad \bigcap\limits_{n=1}^{\infty} F_{n} = f^{-1} (\{\infty \}),
	\]
	then
	\begin{itemize}
		\item \(x\in f^{-1} ([0, \infty ]) = X\setminus \bigcap\limits_{n=1}^{\infty} F_{n} \implies \lim\limits_{n \to \infty} \phi _{n}(x) = f(x)\)
		\item \(x\in f^{-1} (\{\infty \}) = \bigcap\limits_{n=1}^{\infty} F_{n}\implies f_{n}(x)\geq 2^n \implies \lim\limits_{n \to \infty} \phi _{n}(x) = \infty = f(x)\)
	\end{itemize}
\end{proof}

\begin{corollary}
	If \(f\) is bounded on a set \(A\subset \mathbb{\MakeUppercase{r}} \), i.e., \(\exists b>0 \) such that
	\[
		\underset{x\in A}{\forall }\ \left\vert f(x) \right\vert \leq L,
	\]
	then \(\phi _{n}\to f \) \underline{uniformly on \(A\)}.
\end{corollary}
\begin{proof}
	\todo{DIY}
\end{proof}

\begin{corollary}
	If \(f\colon X\to \mathbb{\MakeUppercase{c}} \) is a measurable function if and only if there exists simple functions \(\phi _{n}\colon X\to \mathbb{\MakeUppercase{c}} \)
	such that
	\[
		0\leq \left\vert \phi _1(x) \right\vert \leq \left\vert \phi _2(x) \right\vert \leq \ldots \leq \left\vert f(x) \right\vert
	\]
	with
	\[
		\underset{x\in X}{\forall }\ \lim\limits_{n \to \infty} \phi _{n}(x) = f(x).
	\]
\end{corollary}
\begin{proof}
	\todo{DIY}
\end{proof}

\subsection{Integration of nonnegative functions}
We start with a definition.
\begin{definition}[Integration of nonnegative funciton]\label{def:integration-of-nonnegative-function}
	Let \((X, \mathcal{\MakeUppercase{a}}, \mu  )\) be a \hyperref[def:measure-space]{measure space}, and \(\phi\colon X\to [0, \infty ]\) such that
	\[
		\phi  = \sum\limits_{i=1}^{N} c_{i}\mathbbm{1}_{E_{i}}
	\]
	be a \hyperref[def:simple-function]{simple function}. Define
	\[
		\int_{}^{} \phi \,\mathrm{d}x = \int_{}^{} \phi  \,\mathrm{d}\mu = \int_{X}^{} \phi  \,\mathrm{d}\mu = \sum\limits_{i=1}^{N} c_{i}\mu (E_{i}).
	\]

	\par Furthermore, for \(A\in \mathcal{\MakeUppercase{a}} \),
	\[
		\int_{A}^{} \phi = \int_{A}^{} \phi  \,\mathrm{d}\mu = \int_{}^{} \phi \mathbbm{1}_{A}  \,\mathrm{d}\mu
	\]
\end{definition}
\begin{note}
	Notice that in the expression \(\sum\limits_{i=1}^{N} c_{i}\mu (E_{i})\) we're using the convention such that \(0\cdot \infty = 0\), and in the function
	\(\phi \mathbbm{1}_{A} \) is also a \hyperref[def:simple-function]{simple function} since both \(\phi \) and \(\mathbbm{1}_{A} \) are \hyperref[def:simple-function]{simple function}.
\end{note}

\begin{proposition}
	Suppose we have \(\phi, \psi \geq 0\) be two \hyperref[def:simple-function]{simple functions}. Then,
	\begin{itemize}
		\item \autoref{def:integration-of-nonnegative-function} is well-defined.
		\item \(\int_{}^{} c\phi = c \int_{}^{} \phi \) for \(c\in [0, \infty )\).
		\item \(\int_{}^{} \phi + \psi  =  \int_{}^{} \phi + \int_{}^{} \psi\).
		\item \(\phi (x) \geq \psi (x)\) for all \(x \implies \int_{}^{} \phi \geq \int_{}^{} \psi \).
		      \item\label{prop:nu-measure} \(\nu (A) = \int_{A}^{} \phi  \,\mathrm{d}\mu  \) is a \hyperref[def:measure]{measure} on \((X, \mathcal{\MakeUppercase{a}} )\).
	\end{itemize}
\end{proposition}
\begin{proof}
	\todo{DIY}
\end{proof}

\begin{definition}[Generatlization of Integration of nonnegative function]\label{def:generalization-of-integration-of-nonnegative-function}
	Given \((X, \mathcal{\MakeUppercase{a}} , \mu )\) with \(f\colon X\to [0, \infty ]\) be \hyperref[def:A-measurable-function]{\(\mathcal{\MakeUppercase{a}}\)-measurable}.
	Define
	\[
		\int_{}^{} f= \int_{}^{} f \,\mathrm{d}\mu = \sup \left\{\int_{}^{} \phi  \mid 0\leq \phi \leq f \text{ such that \(\phi\) is \hyperref[def:simple-function]{simple}}  \right\}.
	\]
\end{definition}
\begin{itemize}
	\item If \(f\) is a \hyperref[def:simple-function]{simple function}, the \autoref{def:integration-of-nonnegative-function} and \autoref{def:generalization-of-integration-of-nonnegative-function}
	      of \(\int_{}^{} f \) are the same.
	\item \(\int cf = c\int_{}^{} f\) for \(c\in [0, \infty )\).
	\item If \(f\geq g \geq 0 \implies \int_{}^{} f\geq \int_{}^{} g\).
	\item But \(\int f+g = \int_{}^{} f + \int_{}^{} g\) is not trivial.
\end{itemize}

\begin{theorem}[Monotone Convergence Theorem (MCT)]\label{thm:MCT}
	Given \((X, \mathcal{\MakeUppercase{a}}, \mu)\) be a \hyperref[def:measure-space]{measure space}. Then if
	\begin{itemize}
		\item \(f_{n}\colon X\to [0, \infty ]\) be \hyperref[def:A-measurable-function]{\(\mathcal{\MakeUppercase{a}}\)-measurable } for every \(n\in\mathbb{\MakeUppercase{n}} \)
		\item \(0\leq f_1(x)\leq f_2(x)\leq \ldots  \) for every \(x\in X\)
		\item \(\lim\limits_{n \to \infty} f_{n}(x) = f(x)\),
	\end{itemize}
	we have
	\[
		\int_{}^{} f = \lim\limits_{n \to \infty} \int_{}^{} f_{n}.
	\]
\end{theorem}
\begin{proof}
	Note that \(\lim\limits_{n \to \infty} f_{n}(x)\) converges for every \(x\in X\) and \(\lim\limits_{n \to \infty} \int_{}^{} f_{n}\) converges. Then
	\begin{itemize}
		\item \(f_{n}\leq f \implies \int_{}^{} f_{n}\leq \int_{}^{} f\implies \lim\limits_{n \to \infty} \int f_{n}\leq \int f\).
		\item Fix a simple function \(0\leq \phi \leq f\), then it's enough to show \(\lim\limits_{n \to \infty} \int f_{n}\geq \int \phi \).
		      \par We first fix \(\alpha = (0, 1)\), then it's also enough to show
		      \[
			      \lim\limits_{n \to \infty} \int f_{n}\geq \alpha \int \phi.
		      \]
		      Let \(A_{n} \coloneqq \left\{x\in X\mid f_{n}(x) \geq \alpha \phi (x)\right\}\), then since \(f_{n}\) is \hyperref[def:measurable-function]{measurable},
		      \begin{itemize}
			      \item \(A_{n}\in \mathcal{\MakeUppercase{a}} \)
			      \item \(A_1\subset A_2\subset A_3\subset\ldots  \)
			      \item \(\bigcup\limits_{n=1}^{\infty} A_{n} = X\) \todo{Check!}
		      \end{itemize}
		      We then have
		      \[
			      \int f_{n}\geq \int f_{n}\mathbbm{1}_{A_{n}} \geq \int \alpha \phi \mathbbm{1}_{A_{n}} = \alpha \hyperref[prop:nu-measure]{\nu} (A_{n})
		      \]
		      where \(\hyperref[prop:nu-measure]{\nu}(A) = \int_{A}^{} \phi \) is a \hyperref[def:measure]{measure}. This implies
		      \[
			      \lim\limits_{n \to \infty} \int f_{n}\geq \alpha \lim\limits_{n \to \infty} \hyperref[prop:nu-measure]{\nu } (A_{n}) \overset{\footnotemark}{=} \alpha \hyperref[prop:nu-measure]{\nu}(X) = \alpha \int \phi.
			      \footnotetext{This follows from the continuity of \hyperref[def:measure]{measure} \hyperref[thm:measure-space-continuity-from-below]{from below}}
		      \]
	\end{itemize}
\end{proof}

\begin{corollary}
	Let \(f, g \geq 0\) be \hyperref[def:measurable-function]{measurable}, then
	\[
		\int f+g = \int f+\int g.
	\]
\end{corollary}
\begin{proof}
	There exists simple functions \(\phi _{n}\) and \(\psi _{n}\) such that
	\begin{itemize}
		\item \(0\leq \phi _1 \leq \phi _2\leq \ldots  \) and \(\phi _{n}\to f\) pointwise
		\item \(0\leq \psi _1 \leq \psi _2\leq \ldots  \) and \(\psi _{n}\to f\) pointwise
	\end{itemize}

	Then,
	\[
		\int (f+g)\overset{\hyperref[thm:MCT]{!}}{=}\lim\limits_{n \to \infty} (\phi _{n} + \psi _{n}) = \lim\limits_{n \to \infty} \int \phi _{n} + \int \psi _{n}\overset{\hyperref[thm:MCT]{!}}{=} \int f + \int g.
	\]
\end{proof}
