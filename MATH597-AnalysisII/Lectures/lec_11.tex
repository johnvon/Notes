\lecture{11}{31 Jan.\ 11:00}{Integration of nonnegative functions}
\begin{prev}
	For a \hyperref[def:simple-function]{simple function} \(\phi\), \(c_{i}\) can actually be in \(\mathbb{C} \).
\end{prev}

\begin{theorem}\label{thm:lec11}
	Given a \hyperref[def:measurable-space]{measurable space} \((X, \mathcal{A} )\) and let \(f\colon X\to [0, \infty ]\), the following are equivalent.
	\begin{enumerate}[(a)]
		\item\label{thm:lec11-a} \(f\) is an \hyperref[def:A-measurable-function]{\(\mathcal{A} \)-measurable} function.
		\item\label{thm:lec11-b} There exists \hyperref[def:simple-function]{simple functions} \(0\leq \phi_1(x)\leq \phi_2(x)\leq \dots \leq f(x) \) such that
		      \[
			      \underset{x\in X}{\forall }\ \lim_{n \to \infty} \phi _{n}(x) = f(x)
		      \]
		      i.e., \(f\) is a \underline{\hyperref[def:pointwise-convergence]{pointwise} upward} limit of \hyperref[def:simple-function]{simple functions}.
	\end{enumerate}
\end{theorem}
\begin{proof}
	We'll prove both directions.
	\begin{claim}
		\autoref{thm:lec11-b} \(\implies \) \autoref{thm:lec11-a}.
	\end{claim}
	\begin{explanation}
		It's clear from the fact that \(f(x) = \sup_n \phi _{n}(x)\) and \hyperref[rmk:Operations-preserve-measurability]{the remark}.
	\end{explanation}

	\begin{claim}
		\autoref{thm:lec11-a} \(\implies \) \autoref{thm:lec11-b}.
	\end{claim}
	\begin{explanation}
		Assume \(f\) is \hyperref[def:A-measurable-function]{\(\mathcal{A} \)-measurable}, and fix \(n\in\mathbb{N} \). Let \(F_{n} =f^{-1} ([2^n, \infty ])\in \mathcal{A}\). Also, for \(0\leq k\leq 2^{2n}-1\), \(E_{n, k} = f^{-1} \left(\left[\frac{k}{2^n}, \frac{k+1}{2^n}\right]\right)\in \mathcal{A} \). Then, define \(\phi _{n}\) be
		\[
			\phi _{n} = \sum_{k=0}^{2^{2n} - 1}\frac{k}{2^n}\mathbbm{1}_{E_{n, k}}  + 2^n \mathbbm{1}_{F_n},
		\]
		we have
		\begin{itemize}
			\item \(0\leq \phi _1(x)\leq \phi _2(x)\leq \dots \leq f(x) \) for every \(x\in X\)
			\item \(\forall x\in X\setminus F_{n}\), we have \(0\leq f(x) - \phi _{n}(x)\leq \frac{1}{2^n}\)
		\end{itemize}

		Furthermore, we see that
		\[
			F_1\supset F_2\supset \dots ,\quad \bigcap_{n=1}^{\infty} F_{n} = f^{-1} (\{\infty \}),
		\]
		then
		\begin{itemize}
			\item \(x\in f^{-1} ([0, \infty ]) = X\setminus \bigcap_{n=1}^{\infty} F_{n} \implies \lim_{n \to \infty} \phi _{n}(x) = f(x)\)
			\item \(x\in f^{-1} (\{\infty \}) = \bigcap_{n=1}^{\infty} F_{n}\implies f_{n}(x)\geq 2^n \implies \lim_{n \to \infty} \phi _{n}(x) = \infty = f(x)\)
		\end{itemize}
	\end{explanation}
\end{proof}

\begin{corollary}
	If \(f\) is bounded on a set \(A\subset \mathbb{R} \), i.e., \(\exists L > 0 \) such that
	\[
		\underset{x\in A}{\forall }\ \left\vert f(x) \right\vert \leq L,
	\]
	then there exists a sequence of \hyperref[def:simple-function]{simple functions} \(\{\phi _{n}\}\) such that \(\phi _{n}\to f \) \underline{\hyperref[def:uniformly-convergence]{uniformly} on \(A\)}.
\end{corollary}
\begin{proof}
	\todo{DIY}
\end{proof}

\begin{corollary}
	If \(f\colon X\to \mathbb{C} \) is a \hyperref[def:measurable-function]{measurable function} if and only if there exists
	\hyperref[def:simple-function]{simple functions} \(\phi _{n}\colon X\to \mathbb{C}\) such that
	\[
		0\leq \left\vert \phi _1(x) \right\vert \leq \left\vert \phi _2(x) \right\vert \leq \dots \leq \left\vert f(x) \right\vert
	\]
	with
	\[
		\underset{x\in X}{\forall }\ \lim_{n \to \infty} \phi _{n}(x) = f(x).
	\]
\end{corollary}
\begin{proof}
	\todo{DIY}
\end{proof}

\section{Integration of Nonnegative Functions}
We start with our first definition about integral.
\begin{definition}[Integration of nonnegative funciton]\label{def:integration-of-nonnegative-function}
	Let \((X, \mathcal{A}, \mu  )\) be a \hyperref[def:measure-space]{measure space}, and \(\phi\colon X\to [0, \infty ]\) such that
	\[
		\phi  = \sum_{i=1}^{N} c_{i}\mathbbm{1}_{E_{i}}
	\]
	be a \hyperref[def:simple-function]{simple function}. Define
	\[
		\int_{}^{} \phi = \int_{}^{} \phi  \,\mathrm{d}\mu = \int_{X}^{} \phi  \,\mathrm{d}\mu = \sum_{i=1}^{N} c_{i}\mu (E_{i}).
	\]
	Furthermore, for \(A\in \mathcal{A} \),
	\[
		\int_{A}^{} \phi = \int_{A}^{} \phi  \,\mathrm{d}\mu = \int_{}^{} \phi \mathbbm{1}_{A}  \,\mathrm{d}\mu.
	\]
\end{definition}
\begin{note}
	Note that
	\begin{itemize}
		\item In the expression \(\sum_{i=1}^{N} c_{i}\mu (E_{i})\), we're using the convention \(0\cdot \infty = 0\).
		\item The function \(\phi \mathbbm{1}_{A} \) is also a \hyperref[def:simple-function]{simple function} since both \(\phi \) and
		      \(\mathbbm{1}_{A} \) are \hyperref[def:simple-function]{simple function}.
	\end{itemize}
\end{note}

\begin{proposition}
	Suppose we have \(\phi, \psi \geq 0\) be two \hyperref[def:simple-function]{simple functions}. Then,
	\begin{enumerate}[(a)]
		\item \autoref{def:integration-of-nonnegative-function} is well-defined.
		\item \(\int_{}^{} c\phi = c \int_{}^{} \phi \) for \(c\in [0, \infty )\).
		\item \(\int_{}^{} \phi + \psi  =  \int_{}^{} \phi + \int_{}^{} \psi\).
		\item \(\phi (x) \geq \psi (x)\) for all \(x \implies \int_{}^{} \phi \geq \int_{}^{} \psi \).
		\item\label{prop:nu-measure} \(\nu (A) = \int_{A}^{} \phi  \,\mathrm{d}\mu  \) is a \hyperref[def:measure]{measure} on \((X, \mathcal{A} )\).
	\end{enumerate}
\end{proposition}
\begin{proof}
	\todo{DIY}
\end{proof}

\begin{definition}[Generatlization of Integration of nonnegative function]\label{def:generalization-of-integration-of-nonnegative-function}
	Givena a \hyperref[def:measure-space]{measure space} \((X, \mathcal{A} , \mu )\) with \(f\colon X\to [0, \infty ]\) be \hyperref[def:A-measurable-function]{\(\mathcal{A}\)-measurable}. Define
	\[
		\int_{}^{} f= \int_{}^{} f \,\mathrm{d}\mu = \sup \left\{\int_{}^{} \phi \colon 0\leq \phi \leq f \text{ such that \(\phi\) is \hyperref[def:simple-function]{simple}}  \right\}.
	\]
\end{definition}
\begin{note}
	Note that
	\begin{itemize}
		\item If \(f\) is a \hyperref[def:simple-function]{simple function}, the \autoref{def:integration-of-nonnegative-function} and \autoref{def:generalization-of-integration-of-nonnegative-function} of \(\int_{}^{} f \) are the same.
		\item \(\int cf = c\int_{}^{} f\) for \(c\in [0, \infty )\).
		\item If \(f\geq g \geq 0 \implies \int_{}^{} f\geq \int_{}^{} g\).
		\item But \(\int f+g = \int_{}^{} f + \int_{}^{} g\) is not trivial.
	\end{itemize}
\end{note}

\begin{theorem}[Monotone convergence theorem]\label{thm:MCT}
	Given \((X, \mathcal{A}, \mu)\) be a \hyperref[def:measure-space]{measure space}. Then if
	\begin{itemize}
		\item \(f_{n}\colon X\to [0, \infty ]\) be \hyperref[def:A-measurable-function]{\(\mathcal{A}\)-measurable } for every \(n\in\mathbb{N} \);
		\item \(0\leq f_1(x)\leq f_2(x)\leq \dots  \) for every \(x\in X\);
		\item \(\lim_{n \to \infty} f_{n}(x) = f(x)\) for every \(x\in X\),
	\end{itemize}
	we have
	\[
		\lim_{n \to \infty} \int_{}^{} f_{n} = \int_{}^{} f.
	\]
\end{theorem}
\begin{proof}
	Note that if \(\lim_{n \to \infty} \int f_{n}\) exists, then it's equal to \(\sup _n \int f_{n}\). Then
	\begin{itemize}
		\item \(f_{n}\leq f \implies \int_{}^{} f_{n}\leq \int_{}^{} f\implies \lim_{n \to \infty} \int f_{n}\leq \int f\).
		\item Fix a \hyperref[def:simple-function]{simple function} \(0\leq \phi \leq f\), then it's enough to show \(\lim_{n \to \infty} \int f_{n}\geq \int \phi \). We first fix \(\alpha = (0, 1)\), then it's also enough to show
		      \[
			      \lim_{n \to \infty} \int f_{n}\geq \alpha \int \phi.
		      \]
		      Let \(A_{n} \coloneqq \left\{x\in X\mid f_{n}(x) \geq \alpha \phi (x)\right\}\), then since \(f_{n}\) is \hyperref[def:measurable-function]{measurable},
		      \begin{itemize}
			      \item \(A_{n}\in \mathcal{A} \)
			      \item \(A_1\subset A_2\subset A_3\subset\dots  \)
			      \item \(\bigcup_{n=1}^{\infty} A_{n} = X\) \todo{Check!}
		      \end{itemize}
		      We then have
		      \[
			      \int f_{n}\geq \int f_{n}\mathbbm{1}_{A_{n}} \geq \int \alpha \phi \mathbbm{1}_{A_{n}} = \alpha \int_{A_{n}}\phi = \alpha \hyperref[prop:nu-measure]{\nu} (A_{n})
		      \]
		      where \(\hyperref[prop:nu-measure]{\nu}(A) = \int_{A}^{} \phi \) is a \hyperref[def:measure]{measure}. This implies
		      \[
			      \lim_{n \to \infty} \int f_{n}\geq \alpha \lim_{n \to \infty} \hyperref[prop:nu-measure]{\nu } (A_{n}) \overset{\hyperref[thm:measure-space-continuity-from-below]{!}}{=} \alpha \hyperref[prop:nu-measure]{\nu}(X) = \alpha \int \phi.
		      \]
	\end{itemize}
\end{proof}

\begin{corollary}[Linearity of nonnegative integral]\label{col:linearity-of-nonnegative-integral}
	Let \(f, g \geq 0\) be \hyperref[def:measurable-function]{measurable}, then
	\[
		\int f+g = \int f+\int g.
	\]
\end{corollary}
\begin{proof}
	There exists \hyperref[def:simple-function]{simple functions} \(\phi _{n}\) and \(\psi _{n}\) such that
	\begin{itemize}
		\item \(0\leq \phi _1 \leq \phi _2\leq \dots  \) and \(\phi _{n}\to f\) \hyperref[def:pointwise-convergence]{pointwise}
		\item \(0\leq \psi _1 \leq \psi _2\leq \dots  \) and \(\psi _{n}\to g\) \hyperref[def:pointwise-convergence]{pointwise}
	\end{itemize}
	Then,
	\[
		\int (f+g)\overset{\hyperref[thm:MCT]{!}}{=}\lim_{n \to \infty}\int (\phi _{n} + \psi _{n}) = \lim_{n \to \infty} \int \phi _{n} + \int \psi _{n}\overset{\hyperref[thm:MCT]{!}}{=} \int f + \int g.
	\]
\end{proof}
